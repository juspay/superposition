!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports["index-Context-AwareConfig"]=r():e["index-Context-AwareConfig"]=r()}(self,function(){return function(){"use strict";var e={45:function(e,r){var t,n;Object.defineProperty(r,"__esModule",{value:!0}),r.ExperimentStatusType=r.VariantType=void 0,(n=r.VariantType||(r.VariantType={})).CONTROL="CONTROL",n.EXPERIMENTAL="EXPERIMENTAL",(t=r.ExperimentStatusType||(r.ExperimentStatusType={})).CREATED="CREATED",t.INPROGRESS="INPROGRESS",t.CONCLUDED="CONCLUDED",t.DISCARDED="DISCARDED"},138:function(e,r){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,r,t){for(var n=0,o=Object.entries(e);n<o.length;n++){var a=o[n],f=a[0],u=a[1];if(!(f in r)){if(t)continue;return!1}var p=r[f];if("variantIds"===f){if(!Array.isArray(p))return!1;if(!p.includes(u))return!1}else if(!i(p,u))return!1}return!0}function i(e,r){if(t(e)!==t(r))return!1;if("object"===t(e)){if(null===e||null===r)return e===r;if(Array.isArray(e)&&Array.isArray(r)){if(e.length!==r.length)return!1;for(var n=0;n<e.length;n++)if(!i(e[n],r[n]))return!1;return!0}var o=Object.keys(e),a=Object.keys(r);if(o.length!==a.length)return!1;for(var f=0,u=o;f<u.length;f++){var p=u[f];if(!i(e[p],r[p]))return!1}return!0}return e===r}function o(e,r){return n(e,r,!1)}function a(e,r){return n(e,r,!0)}Object.defineProperty(r,"__esModule",{value:!0}),r.partialApply=r.apply=void 0,r.apply=o,r.partialApply=a,r.default={apply:o,partialApply:a}},176:function(e,r,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},n.apply(this,arguments)},i=this&&this.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var n,i=0,o=r.length;i<o;i++)!n&&i in r||(n||(n=Array.prototype.slice.call(r,0,i)),n[i]=r[i]);return e.concat(n||Array.prototype.slice.call(r))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ExperimentReader=r.CacReader=void 0;var a=t(620),f=o(t(138)),u=t(45),p=function(){function e(e){this.contexts=e.contexts,this.overrides=e.overrides,this.defaultConfig=e.default_configs}return e.prototype.evaluateConfig=function(e){for(var r=this,t=[],o=0;o<this.contexts.length;o++)try{f.default.apply(this.contexts[o].condition,e)&&t.push.apply(t,this.contexts[o].override_with_keys.map(function(e){return r.overrides[e]}))}catch(e){console.error(e)}var u=n({},this.defaultConfig);return a.deepMerge.apply(void 0,i([u],t,!1))},e}();r.CacReader=p;var s=function(){function e(e){this.experiments=e}return e.prototype.getApplicableVariants=function(e,r){if(!Number.isInteger(r))throw new Error("Invalid toss, valid range: -1 to 100");for(var t=[],n=0,i=this.getSatisfiedExperiments(e);n<i.length;n++){var o=i[n],a=this.decideVariant(o.traffic_percentage,o.variants,r);a&&t.push(a.id)}return t},e.prototype.getSatisfiedExperiments=function(e){return this.experiments.filter(function(r){return f.default.apply(r.context,e)})},e.prototype.decideVariant=function(e,r,t){if(Number.isInteger(e)&&Number.isInteger(t)){if(t<0)for(var n=0,i=r;n<i.length;n++){var o=i[n];if(o.variant_type==u.VariantType.EXPERIMENTAL)return o}if(!(t>=e*r.length))return r[Math.floor(t/e)]}},e}();r.ExperimentReader=s},620:function(e,r){var t=this&&this.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var n,i=0,o=r.length;i<o;i++)!n&&i in r||(n||(n=Array.prototype.slice.call(r,0,i)),n[i]=r[i]);return e.concat(n||Array.prototype.slice.call(r))};Object.defineProperty(r,"__esModule",{value:!0}),r.deepMerge=void 0;var n=function(e){return e===Object(e)&&!Array.isArray(e)};r.deepMerge=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(!i.length)return e;var a=e;if(n(a))for(var f=i.length,u=0;u<f;u+=1){var p=i[u];if(n(p))for(var s in p)p.hasOwnProperty(s)&&(n(p[s])?(a[s]&&n(a[s])||(a[s]={}),(0,r.deepMerge)(a[s],p[s])):Array.isArray(a[s])&&Array.isArray(p[s])?a[s]=t([],p[s],!0):a[s]=p[s])}return a}}},r={};return function t(n){var i=r[n];if(void 0!==i)return i.exports;var o=r[n]={exports:{}};return e[n].call(o.exports,o,o.exports,t),o.exports}(176)}()});