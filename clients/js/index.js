!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["Context-Aware-Config"]=t():r["Context-Aware-Config"]=t()}(self,(function(){return r={193:function(r,t,e){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(r,t,e,n){void 0===n&&(n=e);var i=Object.getOwnPropertyDescriptor(t,e);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(r,n,i)}:function(r,t,e,n){void 0===n&&(n=e),r[n]=t[e]}),o=this&&this.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),a=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)"default"!==e&&Object.prototype.hasOwnProperty.call(r,e)&&i(t,r,e);return o(t,r),t},u=this&&this.__spreadArray||function(r,t,e){if(e||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return r.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentReader=t.CacReader=void 0;var f=a(e(962)),p=e(925),l=e(196),c=e(472),s=function(){function r(r){this.contexts=r.contexts,this.overrides=r.overrides,this.defaultConfig=r.default_configs}return r.prototype.evaluateConfig=function(r){for(var t=this,e=[],i=0;i<this.contexts.length;i++)f.apply(this.contexts[i].condition,r)&&e.push.apply(e,this.contexts[i].override_with_keys.map((function(r){return t.overrides[r]})));var o=n({},this.defaultConfig);return p.deepMerge.apply(void 0,u([o],e,!1))},r}();t.CacReader=s,f.add_operation(">>",l.compareSemanticIsGreater);var y=function(){function r(r){this.experiments=r}return r.prototype.getApplicableVariant=function(r,t){if(!Number.isInteger(t))throw new Error("Invalid toss, valid range: -1 to 100");for(var e=[],n=0,i=this.getSatisfiedExperiments(r);n<i.length;n++){var o=i[n],a=this.decideVariant(o.traffic_percentage,o.variants,t);a&&e.push(a.id)}return e},r.prototype.getSatisfiedExperiments=function(r){return this.experiments.filter((function(t){return f.apply(t.context,r)}))},r.prototype.decideVariant=function(r,t,e){if(Number.isInteger(r)&&Number.isInteger(e)){if(e<0)for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.variant_type==c.VariantType.EXPERIMENTAL)return o}if(!(e>=r*t.length))return t[Math.floor(e/r)]}},r}();t.ExperimentReader=y},472:function(r,t){"use strict";var e,n;Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentStatusType=t.VariantType=void 0,(n=t.VariantType||(t.VariantType={})).CONTROL="CONTROL",n.EXPERIMENTAL="EXPERIMENTAL",(e=t.ExperimentStatusType||(t.ExperimentStatusType={})).CREATED="CREATED",e.INPROGRESS="INPROGRESS",e.CONCLUDED="CONCLUDED"},925:function(r,t){"use strict";var e=this&&this.__spreadArray||function(r,t,e){if(e||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return r.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.deepMerge=void 0;var n=function(r){return r===Object(r)&&!Array.isArray(r)};t.deepMerge=function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(!i.length)return r;var a=r;if(n(a))for(var u=i.length,f=0;f<u;f+=1){var p=i[f];if(n(p))for(var l in p)p.hasOwnProperty(l)&&(n(p[l])?(a[l]&&n(a[l])||(a[l]={}),(0,t.deepMerge)(a[l],p[l])):Array.isArray(a[l])&&Array.isArray(p[l])?a[l]=e([],p[l],!0):a[l]=p[l])}return a}},196:function(r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareSemanticIsGreater=void 0;var e=function(r,t){return r.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})>0};t.compareSemanticIsGreater=function(r,t,n){return void 0===n?e(r,t):e(r,t)&&e(t,n)}},962:function(r,t,e){var n,i;n=function(){"use strict";Array.isArray||(Array.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)});var r={},t={"==":function(r,t){return r==t},"===":function(r,t){return r===t},"!=":function(r,t){return r!=t},"!==":function(r,t){return r!==t},">":function(r,t){return r>t},">=":function(r,t){return r>=t},"<":function(r,t,e){return void 0===e?r<t:r<t&&t<e},"<=":function(r,t,e){return void 0===e?r<=t:r<=t&&t<=e},"!!":function(t){return r.truthy(t)},"!":function(t){return!r.truthy(t)},"%":function(r,t){return r%t},log:function(r){return console.log(r),r},in:function(r,t){return!(!t||void 0===t.indexOf)&&-1!==t.indexOf(r)},cat:function(){return Array.prototype.join.call(arguments,"")},substr:function(r,t,e){if(e<0){var n=String(r).substr(t);return n.substr(0,n.length+e)}return String(r).substr(t,e)},"+":function(){return Array.prototype.reduce.call(arguments,(function(r,t){return parseFloat(r,10)+parseFloat(t,10)}),0)},"*":function(){return Array.prototype.reduce.call(arguments,(function(r,t){return parseFloat(r,10)*parseFloat(t,10)}))},"-":function(r,t){return void 0===t?-r:r-t},"/":function(r,t){return r/t},min:function(){return Math.min.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},merge:function(){return Array.prototype.reduce.call(arguments,(function(r,t){return r.concat(t)}),[])},var:function(r,t){var e=void 0===t?null:t,n=this;if(void 0===r||""===r||null===r)return n;for(var i=String(r).split("."),o=0;o<i.length;o++){if(null==n)return e;if(void 0===(n=n[i[o]]))return e}return n},missing:function(){for(var t=[],e=Array.isArray(arguments[0])?arguments[0]:arguments,n=0;n<e.length;n++){var i=e[n],o=r.apply({var:i},this);null!==o&&""!==o||t.push(i)}return t},missing_some:function(t,e){var n=r.apply({missing:e},this);return e.length-n.length>=t?[]:n}};return r.is_logic=function(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)&&1===Object.keys(r).length},r.truthy=function(r){return!(Array.isArray(r)&&0===r.length||!r)},r.get_operator=function(r){return Object.keys(r)[0]},r.get_values=function(t){return t[r.get_operator(t)]},r.apply=function(e,n){if(Array.isArray(e))return e.map((function(t){return r.apply(t,n)}));if(!r.is_logic(e))return e;var i,o,a,u,f,p=r.get_operator(e),l=e[p];if(Array.isArray(l)||(l=[l]),"if"===p||"?:"==p){for(i=0;i<l.length-1;i+=2)if(r.truthy(r.apply(l[i],n)))return r.apply(l[i+1],n);return l.length===i+1?r.apply(l[i],n):null}if("and"===p){for(i=0;i<l.length;i+=1)if(o=r.apply(l[i],n),!r.truthy(o))return o;return o}if("or"===p){for(i=0;i<l.length;i+=1)if(o=r.apply(l[i],n),r.truthy(o))return o;return o}if("filter"===p)return u=r.apply(l[0],n),a=l[1],Array.isArray(u)?u.filter((function(t){return r.truthy(r.apply(a,t))})):[];if("map"===p)return u=r.apply(l[0],n),a=l[1],Array.isArray(u)?u.map((function(t){return r.apply(a,t)})):[];if("reduce"===p)return u=r.apply(l[0],n),a=l[1],f=void 0!==l[2]?l[2]:null,Array.isArray(u)?u.reduce((function(t,e){return r.apply(a,{current:e,accumulator:t})}),f):f;if("all"===p){if(u=r.apply(l[0],n),a=l[1],!Array.isArray(u)||!u.length)return!1;for(i=0;i<u.length;i+=1)if(!r.truthy(r.apply(a,u[i])))return!1;return!0}if("none"===p){if(u=r.apply(l[0],n),a=l[1],!Array.isArray(u)||!u.length)return!0;for(i=0;i<u.length;i+=1)if(r.truthy(r.apply(a,u[i])))return!1;return!0}if("some"===p){if(u=r.apply(l[0],n),a=l[1],!Array.isArray(u)||!u.length)return!1;for(i=0;i<u.length;i+=1)if(r.truthy(r.apply(a,u[i])))return!0;return!1}if(l=l.map((function(t){return r.apply(t,n)})),t.hasOwnProperty(p)&&"function"==typeof t[p])return t[p].apply(n,l);if(p.indexOf(".")>0){var c=String(p).split("."),s=t;for(i=0;i<c.length;i++){if(!s.hasOwnProperty(c[i]))throw new Error("Unrecognized operation "+p+" (failed at "+c.slice(0,i+1).join(".")+")");s=s[c[i]]}return s.apply(n,l)}throw new Error("Unrecognized operation "+p)},r.uses_data=function(t){var e=[];if(r.is_logic(t)){var n=r.get_operator(t),i=t[n];Array.isArray(i)||(i=[i]),"var"===n?e.push(i[0]):i.forEach((function(t){e.push.apply(e,r.uses_data(t))}))}return function(r){for(var t=[],e=0,n=r.length;e<n;e++)-1===t.indexOf(r[e])&&t.push(r[e]);return t}(e)},r.add_operation=function(r,e){t[r]=e},r.rm_operation=function(r){delete t[r]},r.rule_like=function(t,e){if(e===t)return!0;if("@"===e)return!0;if("number"===e)return"number"==typeof t;if("string"===e)return"string"==typeof t;if("array"===e)return Array.isArray(t)&&!r.is_logic(t);if(r.is_logic(e)){if(r.is_logic(t)){var n=r.get_operator(e),i=r.get_operator(t);if("@"===n||n===i)return r.rule_like(r.get_values(t,!1),r.get_values(e,!1))}return!1}if(Array.isArray(e)){if(Array.isArray(t)){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o+=1)if(!r.rule_like(t[o],e[o]))return!1;return!0}return!1}return!1},r},void 0===(i=n.call(t,e,t,r))||(r.exports=i)}},t={},function e(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return r[n].call(o.exports,o,o.exports,e),o.exports}(193);var r,t}));