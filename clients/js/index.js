var r={962:function(r,t,n){var e,i;e=function(){Array.isArray||(Array.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)});var r={},t={"==":function(r,t){return r==t},"===":function(r,t){return r===t},"!=":function(r,t){return r!=t},"!==":function(r,t){return r!==t},">":function(r,t){return r>t},">=":function(r,t){return r>=t},"<":function(r,t,n){return void 0===n?r<t:r<t&&t<n},"<=":function(r,t,n){return void 0===n?r<=t:r<=t&&t<=n},"!!":function(t){return r.truthy(t)},"!":function(t){return!r.truthy(t)},"%":function(r,t){return r%t},log:function(r){return console.log(r),r},in:function(r,t){return!(!t||void 0===t.indexOf)&&-1!==t.indexOf(r)},cat:function(){return Array.prototype.join.call(arguments,"")},substr:function(r,t,n){if(n<0){var e=String(r).substr(t);return e.substr(0,e.length+n)}return String(r).substr(t,n)},"+":function(){return Array.prototype.reduce.call(arguments,(function(r,t){return parseFloat(r,10)+parseFloat(t,10)}),0)},"*":function(){return Array.prototype.reduce.call(arguments,(function(r,t){return parseFloat(r,10)*parseFloat(t,10)}))},"-":function(r,t){return void 0===t?-r:r-t},"/":function(r,t){return r/t},min:function(){return Math.min.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},merge:function(){return Array.prototype.reduce.call(arguments,(function(r,t){return r.concat(t)}),[])},var:function(r,t){var n=void 0===t?null:t,e=this;if(void 0===r||""===r||null===r)return e;for(var i=String(r).split("."),o=0;o<i.length;o++){if(null==e)return n;if(void 0===(e=e[i[o]]))return n}return e},missing:function(){for(var t=[],n=Array.isArray(arguments[0])?arguments[0]:arguments,e=0;e<n.length;e++){var i=n[e],o=r.apply({var:i},this);null!==o&&""!==o||t.push(i)}return t},missing_some:function(t,n){var e=r.apply({missing:n},this);return n.length-e.length>=t?[]:e}};return r.is_logic=function(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)&&1===Object.keys(r).length},r.truthy=function(r){return!(Array.isArray(r)&&0===r.length||!r)},r.get_operator=function(r){return Object.keys(r)[0]},r.get_values=function(t){return t[r.get_operator(t)]},r.apply=function(n,e){if(Array.isArray(n))return n.map((function(t){return r.apply(t,e)}));if(!r.is_logic(n))return n;var i,o,a,u,f,p=r.get_operator(n),l=n[p];if(Array.isArray(l)||(l=[l]),"if"===p||"?:"==p){for(i=0;i<l.length-1;i+=2)if(r.truthy(r.apply(l[i],e)))return r.apply(l[i+1],e);return l.length===i+1?r.apply(l[i],e):null}if("and"===p){for(i=0;i<l.length;i+=1)if(o=r.apply(l[i],e),!r.truthy(o))return o;return o}if("or"===p){for(i=0;i<l.length;i+=1)if(o=r.apply(l[i],e),r.truthy(o))return o;return o}if("filter"===p)return u=r.apply(l[0],e),a=l[1],Array.isArray(u)?u.filter((function(t){return r.truthy(r.apply(a,t))})):[];if("map"===p)return u=r.apply(l[0],e),a=l[1],Array.isArray(u)?u.map((function(t){return r.apply(a,t)})):[];if("reduce"===p)return u=r.apply(l[0],e),a=l[1],f=void 0!==l[2]?l[2]:null,Array.isArray(u)?u.reduce((function(t,n){return r.apply(a,{current:n,accumulator:t})}),f):f;if("all"===p){if(u=r.apply(l[0],e),a=l[1],!Array.isArray(u)||!u.length)return!1;for(i=0;i<u.length;i+=1)if(!r.truthy(r.apply(a,u[i])))return!1;return!0}if("none"===p){if(u=r.apply(l[0],e),a=l[1],!Array.isArray(u)||!u.length)return!0;for(i=0;i<u.length;i+=1)if(r.truthy(r.apply(a,u[i])))return!1;return!0}if("some"===p){if(u=r.apply(l[0],e),a=l[1],!Array.isArray(u)||!u.length)return!1;for(i=0;i<u.length;i+=1)if(r.truthy(r.apply(a,u[i])))return!0;return!1}if(l=l.map((function(t){return r.apply(t,e)})),t.hasOwnProperty(p)&&"function"==typeof t[p])return t[p].apply(e,l);if(p.indexOf(".")>0){var c=String(p).split("."),s=t;for(i=0;i<c.length;i++){if(!s.hasOwnProperty(c[i]))throw new Error("Unrecognized operation "+p+" (failed at "+c.slice(0,i+1).join(".")+")");s=s[c[i]]}return s.apply(e,l)}throw new Error("Unrecognized operation "+p)},r.uses_data=function(t){var n=[];if(r.is_logic(t)){var e=r.get_operator(t),i=t[e];Array.isArray(i)||(i=[i]),"var"===e?n.push(i[0]):i.forEach((function(t){n.push.apply(n,r.uses_data(t))}))}return function(r){for(var t=[],n=0,e=r.length;n<e;n++)-1===t.indexOf(r[n])&&t.push(r[n]);return t}(n)},r.add_operation=function(r,n){t[r]=n},r.rm_operation=function(r){delete t[r]},r.rule_like=function(t,n){if(n===t)return!0;if("@"===n)return!0;if("number"===n)return"number"==typeof t;if("string"===n)return"string"==typeof t;if("array"===n)return Array.isArray(t)&&!r.is_logic(t);if(r.is_logic(n)){if(r.is_logic(t)){var e=r.get_operator(n),i=r.get_operator(t);if("@"===e||e===i)return r.rule_like(r.get_values(t,!1),r.get_values(n,!1))}return!1}if(Array.isArray(n)){if(Array.isArray(t)){if(n.length!==t.length)return!1;for(var o=0;o<n.length;o+=1)if(!r.rule_like(t[o],n[o]))return!1;return!0}return!1}return!1},r},void 0===(i=e.call(t,n,t,r))||(r.exports=i)}},t={};function n(e){var i=t[e];if(void 0!==i)return i.exports;var o=t[e]={exports:{}};return r[e].call(o.exports,o,o.exports,n),o.exports}n.d=(r,t)=>{for(var e in t)n.o(t,e)&&!n.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:t[e]})},n.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var e={};(()=>{n.d(e,{D:()=>l,e:()=>c});var r,t,i=n(962),o=function(r,t,n){if(n||2===arguments.length)for(var e,i=0,o=t.length;i<o;i++)!e&&i in t||(e||(e=Array.prototype.slice.call(t,0,i)),e[i]=t[i]);return r.concat(e||Array.prototype.slice.call(t))},a=function(r){return r===Object(r)&&!Array.isArray(r)},u=function r(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];if(!n.length)return t;var i=t;if(a(i))for(var u=n.length,f=0;f<u;f+=1){var p=n[f];if(a(p))for(var l in p)p.hasOwnProperty(l)&&(a(p[l])?(i[l]&&a(i[l])||(i[l]={}),r(i[l],p[l])):Array.isArray(i[l])&&Array.isArray(p[l])?i[l]=o([],p[l],!0):i[l]=p[l])}return i},f=function(r,t){return r.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})};!function(r){r.CONTROL="CONTROL",r.EXPERIMENTAL="EXPERIMENTAL"}(r||(r={})),function(r){r.CREATED="CREATED",r.INPROGRESS="INPROGRESS",r.CONCLUDED="CONCLUDED"}(t||(t={}));var p=function(){return p=Object.assign||function(r){for(var t,n=1,e=arguments.length;n<e;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r},p.apply(this,arguments)},l=function(){function r(r){this.contexts=r.contexts,this.overrides=r.overrides,this.defaultConfig=r.default_configs}return r.prototype.evaluateConfig=function(r){for(var t=this,n=[],e=0;e<this.contexts.length;e++)try{i.apply(this.contexts[e].condition,r)&&n.push.apply(n,this.contexts[e].override_with_keys.map((function(r){return t.overrides[r]})))}catch(r){console.error(r)}var o=p({},this.defaultConfig);return u.apply(void 0,function(r,t,n){if(n||2===arguments.length)for(var e,i=0,o=t.length;i<o;i++)!e&&i in t||(e||(e=Array.prototype.slice.call(t,0,i)),e[i]=t[i]);return r.concat(e||Array.prototype.slice.call(t))}([o],n,!1))},r}();i.add_operation("match",(function(r,t,n){return new RegExp(t,n).test(r)})),i.add_operation("jp_ver_eq",(function(r,t){return 0===f(r,t)})),i.add_operation("jp_ver_gt",(function(r,t){return f(r,t)>0})),i.add_operation("jp_ver_ge",(function(r,t){return f(r,t)>=0})),i.add_operation("jp_ver_lt",(function(r,t,n){return void 0===n?f(r,t)<0:f(r,t)<0&&f(t,n)<0})),i.add_operation("jp_ver_le",(function(r,t,n){return void 0===n?f(r,t)<=0:f(r,t)<=0&&f(t,n)<=0}));var c=function(){function t(r){this.experiments=r}return t.prototype.getApplicableVariant=function(r,t){if(!Number.isInteger(t))throw new Error("Invalid toss, valid range: -1 to 100");for(var n=[],e=0,i=this.getSatisfiedExperiments(r);e<i.length;e++){var o=i[e],a=this.decideVariant(o.traffic_percentage,o.variants,t);a&&n.push(a.id)}return n},t.prototype.getSatisfiedExperiments=function(r){return this.experiments.filter((function(t){return i.apply(t.context,r)}))},t.prototype.decideVariant=function(t,n,e){if(Number.isInteger(t)&&Number.isInteger(e)){if(e<0)for(var i=0,o=n;i<o.length;i++){var a=o[i];if(a.variant_type==r.EXPERIMENTAL)return a}if(!(e>=t*n.length))return n[Math.floor(e/t)]}},t}()})();var i=e.D,o=e.e;export{i as CacReader,o as ExperimentReader};